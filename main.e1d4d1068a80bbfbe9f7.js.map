{"version":3,"sources":["webpack:///./templates/movieList.hbs","webpack:///./settings/index.js","webpack:///./js/fetchPopular.js","webpack:///./helpers/index.js","webpack:///./js/movie-pagination.js","webpack:///./index.js","webpack:///./templates/movieCard.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","invokePartial","decorators","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","nullContext","program","noop","BASE_URL","API_KEY","api","fetchPopular","page","fetch","then","json","POSTER_URL","settings","MoviePagination","selector","this","element","document","querySelector","currentPage","totalPages","prevPage","bind","nextPage","fetchMovies","results","movies","convertMovieData","addMovies","newMovies","movieList","map","movie","movieAdapter","movieApi","total_pages","mount","render","innerHTML","movieListTemplate","console","error","imageName","release_date","poster_path","original_title","vote_average","imgSrc","title","rating","Math","round","releaseDate","prevBtnRef","nextBtnRef","addEventListener","helper","alias1","alias2","hooks","helperMissing","alias4","escapeExpression"],"mappings":"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","file":"main.e1d4d1068a80bbfbe9f7.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(require(\"./movieCard.hbs\"),depth0,{\"name\":\"./movieCard.hbs\",\"data\":data,\"indent\":\"  \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":3,\"column\":9}}})) != null ? stack1 : \"\");\n},\"usePartial\":true,\"useData\":true});","export default {\n    BASE_URL: 'https://api.themoviedb.org/3',\n    API_KEY: 'f8b94e020f7b56d4f675ed0dd6bb581c',\n    POSTER_URL: 'https://themoviedb.org/t/p/w220_and_h330_face',\n};","import setting from \"../settings/index\";\n\nconst { BASE_URL, API_KEY } = setting;\n\nconst api = {\n    fetchPopular(page = '') {\n        const url = `${BASE_URL}/movie/popular?api_key=${API_KEY}&page=${page}`;\n        return fetch(url).then(data => data.json());\n    },\n};\n\nexport default api;\n\n\n","\nimport settings from '../settings/index';\n\nconst { POSTER_URL } = settings;\n\nexport const generatePosterPath = imageName => `${POSTER_URL}${imageName}`;","import movieApi from '../js/fetchPopular';\nimport movieListTemplate from '../templates/movieList.hbs'\nimport { generatePosterPath } from '../helpers/index'\n\n\nconst maxRating = 10;\n\nclass MoviePagination {\n    #movies = [];\n\n    constructor(selector) {\n        this.element = document.querySelector(selector);\n        this.#movies = [];\n        this.currentPage = 1;\n        this.totalPages = 0;\n        this.prevPage = this.prevPage.bind(this);\n        this.nextPage = this.nextPage.bind(this);\n       \n    }\n    \n    get movies() {\n       return this.#movies;\n    };\n    set movies(movieList){\n        if(!movieList) {\n            console.error('Где список фильмов?')\n        }\n        this.#movies = movieList;\n        this.render();\n    };\n\n    prevPage() {\n        if (this.currentPage === 1){\n            return;\n        }    \n        this.currentPage -= 1;\n        this.fetchMovies().then(({results}) => {\n            this.movies = this.convertMovieData(results)\n        });\n    }\n    nextPage() {\n        if (this.currentPage === this.totalPages) {\n            return;\n        }\n        this.currentPage += 1;\n        this.fetchMovies().then(({results}) => {\n            this.movies = this.convertMovieData(results)\n        });\n    }\n\n    addMovies(newMovies){\n        this.movies = [...this.movies, ...newMovies];\n    }\n     \n    convertMovieData(movieList){\n      return movieList.map(movie => movieAdapter(movie));\n    }\n\n    fetchMovies(){\n        return movieApi\n        .fetchPopular(this.currentPage)\n        .then(({ results, total_pages } ) => ({ results, total_pages}));\n    }\n\n    mount(){\n        this.fetchMovies().then(({ results, total_pages } ) => {\n            this.movies = results.map(movie => movieAdapter(movie));\n            this.totalPages = total_pages;\n        })\n    }\n\n    render() {\n        this.element.innerHTML = movieListTemplate(this.movies);\n       \n    }\n}\n\nconst movieAdapter =({ release_date, poster_path, original_title, vote_average }) => ({\n    imgSrc: generatePosterPath(poster_path),\n    title: original_title,\n    rating: Math.round((vote_average / maxRating) * 100) + '%',\n    releaseDate: release_date\n})\n\n\nexport default MoviePagination;\n\n\n\n\n\n\n\n","import './styles.css';\nimport MoviePagination from './js/movie-pagination';\n\nconst movies = new MoviePagination('.movie-list');\nconst prevBtnRef = document.querySelector('#prev-page');\nconst nextBtnRef = document.querySelector('#next-page');\nmovies.mount();\n\n\nprevBtnRef.addEventListener('click', movies.prevPage);\nnextBtnRef.addEventListener('click', movies.nextPage);\n\n\n   \n  ","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n<div class=\\\"movie-card\\\">\\n    <div class=\\\"movie-card_inner\\\">\\n        <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":18},\"end\":{\"line\":4,\"column\":28}}}) : helper)))\n    + \"\\\" alt=\\\"movie poster\\\" class=\\\"movie-card_poster\\\">\\n        <div class=\\\"movie-card_rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"rating\") || (depth0 != null ? lookupProperty(depth0,\"rating\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rating\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":39},\"end\":{\"line\":5,\"column\":49}}}) : helper)))\n    + \"</div>\\n        <h2 class=\\\"movie-card_title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":37},\"end\":{\"line\":6,\"column\":46}}}) : helper)))\n    + \"</h2>\\n        <time class=\\\"movie-card_date\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseDate\") || (depth0 != null ? lookupProperty(depth0,\"releaseDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":38},\"end\":{\"line\":7,\"column\":53}}}) : helper)))\n    + \"</time>\\n    </div>\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}